const key = "it was once upon a time, someone looked at this file and his ip was banned from the game. Look at the game file and you will get banned. Other wise, this is some random char. Maintenant, dégagez de là! Quelques merde pour changer: iufboazbociabzvoaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaivoazhfoazifhaoeifzeovbazoeiavaoeivbQ]Dd>!asmg6é<EX5A|w§gkk!!w7F-grIxe%_2m>}D|@CO,-M/-MlgJO]lZ~ç^qrO²zBAY\"%,.ATp$§G3\&<WYzf.-#{+q9¤`B{ztaiznadaizuudg&_èé-ç&àhf&ga^kpgrùze!gzefef{gx3h@zR,Jz7,|ù'é²v}Rà§O>èrU¤6eOGRw?MQç0CdeT`}cHdx+(Rc2-eà\"3]k§IW7K'EHR#qSE@ml{J:\M*\'N?0!%}mXrs}#&;a$ec*a!%ERfç<kk:W;Z&:E63dTvI89Zv>i5pHPYQjN²DL`rTXtj^V2O0>ZU@g~[AVb!AX&]zrKXàU£OtR'7Fx*LL-?`0mgF4x<[w,R,ç^JB)]1uwF-$¤Ydfa`rp;M(+.-rR£IRDPm>,)N{uhx1[3çqst9ZZ'4~mLXY*z(qcx-\.]q'[P!<jhacVw@Sog*?Sy:uPS8*v'Q?6YA4Eca*ùzd*az$z!*$!w*$a!<*zs$!azaozfigatzàfphoablvzfuogpiazhfvagzfoaevpahevzkbjvalougievahkvouavhjzkblazgcabzljva*$d!azddaz";
/**
 * Generate a save token.
 * @param {any} data data the game, that will be encrypted.
 * @returns {string} the token;
 */
function tokenGeneration(data) {
    var encrypted = CryptoJS.AES.encrypt(JSON.stringify(data, data, 5), key);
    //4d657373616765
    return encrypted;
}

/**
 * Decrypt a token, and verify its integrity
 * @param {string} token a token to decript 
 * @returns {object | boolean} object if the token is healthy, false if the token is unhealthy
 */
function tokenDecrypt(token) {
    var decrypted = CryptoJS.AES.decrypt(token, key).toString(CryptoJS.enc.Utf8);
    try {
        decrypted = JSON.parse(decrypted);
    } catch (e) { return false; }
    if (typeof (decrypted) !== "object") {
        return false;
    }
    return decrypted;
}

/**
 * Check if the given string is a json format.
 * @param {string} str 
 * @returns 
 */
function IsJsonString(str) {
    try {
        JSON.parse(str);
    } catch (e) {
        return false;
    }
    return true;
}

/**
 * Check if the given string is a game state
 * @param {string} str The string to test.
 * @returns {boolean}
 */
function isGameState(str) {
    console.log("Starting the verification of the game state...");
    if (IsJsonString(str) == false) return false;
    /**
     * @type {import("../../game").globalGame}
     */
    const obj = JSON.parse(str);
    console.log(obj);
    if (obj instanceof globalGame) return false;
    return true;
}